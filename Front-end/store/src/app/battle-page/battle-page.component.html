<div *ngIf="(battleInfo$ | async) as battle" class="battle-block">
  <div class="first-book">
    <div title="{{battle.firstBattleBook.name}}" class="book-name">
      <a target="_blank" href="/book-store/catalog/book/{{battle.firstBattleBook.bookId}}">
        {{battle.firstBattleBook.name}}
      </a>
    </div>
    <img [alt]="battle.firstBattleBook.name" src="{{battle.firstBattleBook.titleImage | base64ToImgSrc}}">
    <div *ngIf="canUserVote(battle.firstBattleBook.bookId, battle.votedBattleBookId)" class="voting-block">
      <mat-form-field class="voting-filed" appearance="outline">
        <input min="0" type="number" matInput placeholder="Введите количество очков" />
      </mat-form-field>
      <div class="voting-button-block">
        <button mat-stroked-button>Голосовать</button>
      </div>
    </div>
  </div>
  <div class="center-block">
    <div class="countdown">
      <div>
        Баттл завершится через:
      </div>
      <div class="time">
        <cd-timer [countdown]="true" [startTime]="getRemainingTime(battle.endDate)" format="user">
          [days]:[hours]:[minutes]:[seconds]
        </cd-timer>
      </div>
    </div>
    <div class="versus">
      VS
    </div>
    <div class="votes-block">
      Очки
      <div class="votes-count">
        <div>
          {{battle.firstBattleBook.totalVotingPointCount}}
        </div>
        <div>
          {{battle.secondBattleBook.totalVotingPointCount}}
        </div>
      </div>
    </div>
    <div class="discount-block">
      <div class="discount">
        {{battle.discountPercentage}}% / 30%
      </div>
      <div class="prices-for-winner">
        <div class="book-price">
          <div class="old-price">
            {{battle.firstBattleBook.cost}} &#8381;
          </div>
          &nbsp; &nbsp;
          <div class="new-price">
            {{battle.firstBattleBook.cost * (1 - battle.discountPercentage / 100)}} &#8381;
          </div>
        </div>
        <mat-icon matTooltip="Цена в случае победы">help_outline</mat-icon>
        <div class="book-price">
          <div class="old-price">
            {{battle.secondBattleBook.cost}} &#8381;
          </div>
          &nbsp; &nbsp;
          <div class="new-price">
            {{battle.secondBattleBook.cost * (1 - battle.discountPercentage / 100)}} &#8381;
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="second-book">
    <div title="{{battle.secondBattleBook.name}}" class="book-name">
      <a target="_blank" href="/book-store/catalog/book/{{battle.secondBattleBook.bookId}}">
        {{battle.secondBattleBook.name}}
      </a>
    </div>
    <img [alt]="battle.secondBattleBook.name" src="{{battle.secondBattleBook.titleImage | base64ToImgSrc}}">
    <div *ngIf="canUserVote(battle.secondBattleBook.bookId, battle.votedBattleBookId)" class="voting-block">
      <mat-form-field class="voting-filed" appearance="outline">
        <input min="0" type="number" matInput placeholder="Введите количество очков" />
      </mat-form-field>
      <div class="voting-button-block">
        <button mat-stroked-button>Голосовать</button>
      </div>
    </div>
  </div>
</div>
